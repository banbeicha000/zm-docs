import{d as T,h as _,j as P,o as w,c as q,k as f,L as V,_ as Y,l as X,e as B,p as L,m as z,O as k,X as S}from"./chunks/framework.a911dc49.js";const G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcgAAAFYCAIAAABYpfv+AAAFLUlEQVR4Xu3UsQ0DMQwEQfXfh+r0B3bihyJxwxlsQLCAWx8AUuv9AGDmN6wLgLH3sH4PAO4YVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaAmGEFiBlWgJhhBYgZVoCYYQWIGVaA2GlY95YkXXcaVknSIMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlKcYZWkOMMqSXGGVZLiDKskxRlWSYozrJIUZ1glKc6wSlLcaVj3liRddxpWAAYMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtAzLACxAwrQMywAsQMK0DMsALEDCtA7DCsAAz9DSsAFcMKEHsABVFESyYipFwAAAAASUVORK5CYII=",Q=T({__name:"barAndPieChart",setup(E){const C=_(null),o=_(null),v=()=>{const h=[16,68,20,30,54],l=C.value.getContext("2d");l.fillStyle="white",l.fillRect(0,0,500,500),l.fillStyle="blue",h.forEach((D,c)=>{l.fillRect(40+c*100,460-D*5,50,D*5)}),l.fillStyle="black",l.lineWidth=2,l.beginPath(),l.moveTo(30,10),l.lineTo(30,460),l.lineTo(490,460),l.stroke(),l.fillStyle="black";for(let D=0;D<6;D++)l.fillText((5-D)*20+"",4,D*80+60),l.beginPath(),l.moveTo(25,D*80+60),l.lineTo(30,D*80+60),l.stroke();const F=["JAN","FEB","MAR","APR","MAY"];for(let D=0;D<5;D++)l.fillText(F[D],50+D*100,475)},m=()=>{const h=[100,68,20,30,100],l=o.value.getContext("2d");l.fillStyle="white",l.fillRect(0,0,500,500);const F=["orange","green","blue","yellow","teal"];let D=h.reduce((s,p)=>s+p,0),c=0;h.forEach((s,p)=>{const r=s/D,n=c+r*Math.PI*2;l.fillStyle=F[p];const a=l.createRadialGradient(250,250,10,250,250,100);a.addColorStop(0,"white"),a.addColorStop(1,F[p]),l.fillStyle=a,l.beginPath(),l.moveTo(250,250),l.arc(250,250,100,c,n,!1),l.fill(),l.strokeStyle="red",l.stroke(),c=n}),l.fillStyle="black",l.font="bold 24px serif";const e="Sales Data from 2025",i=l.measureText(e);l.fillText(e,250-i.width/2,400)};return P(()=>{v(),m()}),(h,b)=>(w(),q(V,null,[f("canvas",{width:"500",height:"500",ref_key:"canvasRef",ref:C,class:"canvas"},null,512),f("canvas",{width:"500",height:"500",ref_key:"canvasPieRef",ref:o,class:"canvas mt-2"},null,512)],64))}});const Z=Y(Q,[["__scopeId","data-v-231a2fa8"]]),K="/zm-docs/assets/animate_snowball.84b4cac2.png",N="/zm-docs/assets/rhino.d7c68493.png",j="/zm-docs/assets/park.30335574.png",J={key:0},O=["src"],U={key:1,class:"flex"},$=f("div",{class:"flex flex-1 h-75"},[f("div",{id:"hovered-color",class:"w-1/2 h-full flex items-center justify-center"}),f("div",{id:"selected-color",class:"w-1/2 h-full flex items-center justify-center"})],-1),H={key:3,class:"overflow-auto h-56"},M=T({__name:"canvasAnimation",props:{demoName:{type:String,validator(E){return["default","getImage","clock","drawImage"].includes(E)},default:"default"}},setup(E){const C=E,o=_(null),v=_(null),m=_(null),h=_(null),b=(c,e,i)=>{const s=i,p=e;s.popover="auto",p.popoverTargetElement=s,p.popoverTargetAction="toggle";const r=c,n=r.getContext("2d");let a=[],y=0,t=!1;function A(){t&&(requestAnimationFrame(A),g(),d(),x(),I())}const g=()=>{y%10==0&&a.length<100&&a.push({x:Math.random()*r.width,y:0,speed:2+Math.random()*3,radius:5+Math.random()*5,color:"white"}),!(a.length>=100)&&y++},d=()=>{for(const u of a)u.y+=u.speed},x=()=>{for(const u of a)u.y>r.height&&(u.y=0)},I=()=>{n.fillStyle="black",n.fillRect(0,0,r.width,r.height);for(const u of a)n.beginPath(),n.arc(u.x,u.y,u.radius,0,Math.PI*2),n.closePath(),n.fillStyle=u.color,n.fill()};s.addEventListener("beforetoggle",u=>{u.newState==="open"?(n.clearRect(0,0,r.width,r.height),t=!0,requestAnimationFrame(A)):(t=!1,a.splice(0))})},l=()=>{const c=h.value,e=c.getContext("2d",{willReadFrequently:!0}),i=new Image;i.crossOrigin="anonymous",i.src=N,i.onload=function(){e.drawImage(i,0,0),i.style.display="none"};const s=document.getElementById("hovered-color"),p=document.getElementById("selected-color");function r(n,a){const y=n.offsetX,t=n.offsetY,g=e.getImageData(y,t,1,1).data,d=`rgba(${g[0]}, ${g[1]}, ${g[2]}, ${g[3]/255})`;return a.style.background=d,a.textContent=d,d}c.addEventListener("mousemove",function(n){r(n,s)}),c.addEventListener("click",function(n){r(n,p)})},F=()=>{function c(){const e=new Date,s=h.value.getContext("2d",{willReadFrequently:!0});s.save(),s.clearRect(0,0,150,150),s.translate(75,75),s.scale(.4,.4),s.rotate(-Math.PI/2),s.strokeStyle="black",s.fillStyle="white",s.lineWidth=8,s.lineCap="round",s.save(),Array.from({length:12}).forEach(a=>{s.beginPath(),s.rotate(Math.PI/6),s.moveTo(100,0),s.lineTo(120,0),s.stroke()}),s.restore(),s.save(),s.lineWidth=5,Array.from({length:60}).forEach((a,y)=>{y%5!==0&&(s.beginPath(),s.moveTo(117,0),s.lineTo(120,0),s.stroke()),s.rotate(Math.PI/30)}),s.restore();const p=e.getSeconds(),r=e.getMinutes();let n=e.getHours();n=n>=12?n-12:n,s.fillStyle="black",s.save(),s.rotate(n*(Math.PI/6)+Math.PI/360*r+Math.PI/21600*p),s.lineWidth=14,s.beginPath(),s.moveTo(-20,0),s.lineTo(80,0),s.stroke(),s.restore(),s.save(),s.rotate(Math.PI/30*r+Math.PI/1800*p),s.lineWidth=10,s.beginPath(),s.moveTo(-28,0),s.lineTo(112,0),s.stroke(),s.restore(),s.save(),s.rotate(p*Math.PI/30),s.strokeStyle="#D40000",s.fillStyle="#D40000",s.lineWidth=6,s.beginPath(),s.moveTo(-30,0),s.lineTo(83,0),s.stroke(),s.beginPath(),s.arc(0,0,10,0,Math.PI*2,!0),s.fill(),s.beginPath(),s.arc(95,0,10,0,Math.PI*2,!0),s.stroke(),s.fillStyle="rgba(0,0,0,0)",s.arc(0,0,3,0,Math.PI*2,!0),s.fill(),s.restore(),s.beginPath(),s.lineWidth=14,s.strokeStyle="#325FA2",s.arc(0,0,142,0,Math.PI*2,!0),s.stroke(),s.restore(),window.requestAnimationFrame(c)}window.requestAnimationFrame(c)},D=()=>{const c=new Image;c.src=j;const e=800,i=200,s=30,p=1.05,r=-4.5,n=.75;let a,y,t=0,A,g,d;c.onload=function(){return a=c.width*p,y=c.height*p,a>e&&(t=e-a),a>e?A=a:A=e,y>i?g=y:g=i,d=h.value.getContext("2d"),setInterval(x,s)};function x(){d.clearRect(0,0,A,g),a<=e?(t>e&&(t=-a+t),t>0&&d.drawImage(c,-a+t,r,a,y),t-a>0&&d.drawImage(c,-a*2+t,r,a,y)):(t>e&&(t=e-a),t>e-a&&d.drawImage(c,t-a+1,r,a,y)),d.drawImage(c,t,r,a,y),t+=n}};return P(()=>{switch(C.demoName){case"default":b(v.value,o.value,m.value);break;case"getImage":l();break;case"clock":F();break;case"drawImage":D();break}}),(c,e)=>C.demoName==="default"?(w(),q("div",J,[f("button",{ref_key:"btnRef",ref:o},[f("img",{class:"w-52 h-26",src:X(K)},null,8,O)],512),f("div",{ref_key:"popRef",ref:m},[f("canvas",{width:"400",height:"300",class:"border border-black",ref_key:"canvasRef",ref:v},null,512)],512)])):C.demoName==="getImage"?(w(),q("div",U,[f("canvas",{width:"400",height:"300",ref_key:"canvasImgRef",ref:h},null,512),$])):C.demoName==="clock"?(w(),q("canvas",{key:2,width:"400",height:"300",ref_key:"canvasImgRef",ref:h},null,512)):C.demoName==="drawImage"?(w(),q("div",H,[f("canvas",{width:"800",height:"200",ref_key:"canvasImgRef",ref:h},null,512)])):B("",!0)}}),ss=E=>(L("data-v-7662bc10"),E=E(),z(),E),ns={key:0},as={key:1},ls={key:2,class:"relative",style:{height:"400px",width:"600px"}},ps=ss(()=>f("canvas",{id:"canvasColor",width:"600",height:"400",class:"canvas invisible"},null,-1)),os=T({__name:"canvasIsPoint",props:{demoName:{type:String,validator(E){return["point","drag","color"].includes(E)},default:"point"}},setup(E){const C=E,o=_(null),v=_(null),m=()=>{const l=o.value.getContext("2d"),F=(s=0,p=600)=>Math.random()*(p-s)+s,D=(s,p)=>{let r=0,{x:n,y:a}=s;for(const y of p){let{p1:t,p2:A}=y;t.y<a&&A.y<a||t.y>=a&&A.y>=a||(a-t.y)/(A.y-t.y)*(A.x-t.x)+t.x>=n&&r++}return r%2===0};l.fillStyle="blue";const c=5;let e=[];const i=[];for(const s of Array.from({length:c}))e.push({x:F(),y:F()});l.beginPath(),e.forEach((s,p)=>{let r;p===0?(l.moveTo(s.x,s.y),r=e.at(-1)):(l.lineTo(s.x,s.y),r=e.at(p-1)),i.push({p1:r,p2:s})}),l.closePath(),l.fill(),o.value.addEventListener("mousemove",s=>{const{offsetX:p,offsetY:r}=s,n=D({x:p,y:r},i);v.value.innerText=`图形${n?"外":"内"}`})},h=()=>{const l=o.value.getContext("2d"),F=20;let D=!1,c=null;function e(n,a){n.clearRect(0,0,o.value.width,o.value.height),a.NewcontrolRect=s(a);let{x:y,y:t,w:A,h:g,scaleX:d,scaleY:x}=a;n.save(),n.translate(y,t),n.scale(d,x),n.beginPath(),n.fillStyle="green",n.fillRect(0,0,A,g),n.save(),n.scale(1/d,1/x),n.beginPath(),n.fillStyle="black",n.arc(0,0,10,0,2*Math.PI),n.fill(),n.beginPath(),n.fillStyle="red",n.fillRect(A*d-F/2,g/2-F/2,F,F),n.beginPath(),n.fillStyle="blue",n.fillRect(-F/2,g/2-F/2,F,F),n.restore(),n.restore()}function i(n,a){let y=null,t="";if(a.scaleX*a.x,n.x-a.x<=20&&(y=a.NewcontrolRect.leftC,t="right"),n.x-a.x>50&&(y=a.NewcontrolRect.rightC,t="left"),!y)return!1;const{x:A,y:g,w:d,h:x}=y,{x:I,y:u}=n;return I>=A&&I<=A+d&&u>=g&&u<=g+x?t:!1}function s(n){let{x:a,y,w:t,h:A,scaleX:g,scaleY:d}=n,x={x:a-F/2,y:y+A/2-F/2,w:F,h:F},I={x:a+t*g-F/2,y:y+A/2-F/2,w:F,h:F};return{leftC:x,rightC:I}}const p={x:300,y:100,w:200,h:200,scaleX:1,scaleY:1};e(l,p),document.addEventListener("mousemove",n=>{n.preventDefault();const a={x:n.offsetX,y:n.offsetY};D?(p.scaleX=r(c,a),e(l,p)):i(a,p)?o.value.style.cursor="e-resize":o.value.style.cursor=""}),o.value.addEventListener("mousedown",n=>{n.preventDefault();const a={x:n.offsetX,y:n.offsetY},y=i(a,p);y&&(D=!0,c={ex:a.x,ey:a.y,x:p.x,y:p.y,w:p.w*p.scaleX,h:p.h*p.scaleY,scaleX:p.scaleX,originX:y,originY:"center"})}),document.addEventListener("mouseup",n=>{n.preventDefault(),D=!1,c=null});function r(n,a){const{ex:y,ey:t,x:A,y:g}=n,{w:d}=p,{x,y:I}=a;let u=1;if(n.originX==="left")u=(x-A)/d,p.x=n.x;else if(n.originX==="right"){const{scaleX:W}=n;u=(d*W+(A-x))/d,p.x=x}return u}},b=()=>{const l=o.value.getContext("2d"),D=document.querySelector("#canvasColor").getContext("2d");function c(e,i,s=!1){e.save(),e.beginPath(),s?(e.fillStyle=i,e.fill()):e.strokeStyle=i;for(let p=0;p<5;p++)e.lineTo(Math.cos((18+p*72)/180*Math.PI)*200+200,-Math.sin((18+p*72)/180*Math.PI)*200+200),e.lineTo(Math.cos((54+p*72)/180*Math.PI)*80+200,-Math.sin((54+p*72)/180*Math.PI)*80+200);e.closePath(),s?e.fill():e.stroke(),e.restore()}c(l,"blue",!0),c(D,"red",!0),o.value.onmousedown=e=>{const s=D.getImageData(e.offsetX,e.offsetY,1,1).data,p=`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${s[3]/255})`;v.value.innerText=p}};return P(()=>{switch(C.demoName){case"point":m();break;case"drag":h();break;case"color":b();break}}),(l,F)=>C.demoName==="point"?(w(),q("div",ns,[f("canvas",{ref_key:"canvasEl",ref:o,width:"600",height:"600",class:"canvas"},null,512),f("h3",{ref_key:"hText",ref:v,style:{color:"red"}},null,512)])):C.demoName==="drag"?(w(),q("div",as,[f("canvas",{ref_key:"canvasEl",ref:o,width:"600",height:"600",class:"canvas"},null,512)])):C.demoName==="color"?(w(),q("div",ls,[f("canvas",{ref_key:"canvasEl",ref:o,width:"600",height:"400",class:"canvas absolute left-0 top-0 w-full"},null,512),ps,f("h3",{ref_key:"hText",ref:v,class:"absolute left-0 bottom-0"},null,512)])):B("",!0)}});const R=Y(os,[["__scopeId","data-v-7662bc10"]]),es=S("",30),ts=S("",15),cs=S("",2),rs=S("",2),ys=S("",2),Fs=S("",4),Ds=S("",2),Cs=S("",3),ds=JSON.parse('{"title":"Canvas","description":"","frontmatter":{},"headers":[],"relativePath":"javascript/Canvas.md","filePath":"javascript/Canvas.md","lastUpdated":1698395560000}'),As={name:"javascript/Canvas.md"},gs=Object.assign(As,{setup(E){return P(()=>{{const o=document.getElementById("canvas-greenBox").getContext("2d");o.fillStyle="green",o.fillRect(10,10,150,100)}{const o=document.getElementById("canvas-translate").getContext("2d"),v=[16,68,20,30,54];o.fillStyle="red",v.forEach(m=>{o.translate(68,0),o.fillRect(0,0,50,m)})}{const o=document.getElementById("canvas-save").getContext("2d");o.fillStyle="green",o.fillRect(0,0,50,50),o.save(),o.translate(0,50),o.fillStyle="red",o.fillRect(100,0,50,50),o.restore(),o.translate(0,50),o.fillStyle="blue",o.fillRect(200,0,50,50)}{const C=document.getElementById("canvas-clip"),o=C.getContext("2d");o.beginPath(),o.arc(100,75,50,0,Math.PI*2),o.clip(),o.fillStyle="blue",o.fillRect(0,0,C.width,C.height),o.fillStyle="orange",o.fillRect(0,0,100,100)}{let l=function(){b&&(requestAnimationFrame(l),m.fillStyle="red",m.fillRect(h,100,200,100),h+=5)};const C=document.getElementById("my-popover"),o=document.getElementById("btn");C.popover="auto",o.popoverTargetElement=C,o.popoverTargetAction="toggle";const v=document.getElementById("canvas-animate_poprect"),m=v.getContext("2d");let h=0,b=!1;C.addEventListener("beforetoggle",F=>{F.newState==="open"?(h=0,m.clearRect(0,0,v.width,v.height),b=!0,requestAnimationFrame(l)):b=!1})}}),(C,o)=>(w(),q("div",null,[es,k(Z),ts,k(M),cs,k(M,{demoName:"clock"}),rs,k(M,{demoName:"getImage"}),ys,k(M,{demoName:"drawImage"}),Fs,k(R),Ds,k(R,{demoName:"drag"}),Cs,k(R,{demoName:"color"})]))}});export{ds as __pageData,gs as default};
