import{d as i,h as d,o as t,c,e as u,O as A,X as D}from"./chunks/framework.a911dc49.js";const v={class:"w-80 h-80 flex justify-center items-center relative"},h={key:0,width:"320",height:"320"},m=i({__name:"camera",setup(C){const o=d(!1),p=()=>{var r;o.value=!0,(r=navigator.mediaDevices)!=null&&r.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(n=>{let l=null,y=null;n.forEach(e=>{e.kind==="audioinput"?l=e.deviceId:e.kind==="videoinput"&&(y=e.deviceId)}),a(l,y)}).catch(n=>{console.error(`${n.name}: ${n.message}`)}):console.log("enumerateDevices() not supported.");async function a(n,l){const y={audio:{deviceId:n},video:{deviceId:l}},e=await navigator.mediaDevices.getUserMedia(y);console.log(e);const F=document.querySelector("video");F.srcObject=e,F.onloadedmetadata=()=>{F.play()}}},s=()=>{o.value=!1};return(a,r)=>(t(),c("div",v,[o.value?(t(),c("video",h)):(t(),c("button",{key:1,type:"button",onClick:p},"允许摄像头")),o.value?(t(),c("button",{key:2,type:"button",class:"absolute bottom-0",onClick:s},"销毁摄像头")):u("",!0)]))}}),g=i({__name:"screenShot",setup(C){const o=async()=>{try{const p=await navigator.mediaDevices.getDisplayMedia({video:!0}),s=document.createElement("video");s.srcObject=p,await new Promise(n=>s.onloadedmetadata=n),s.width=s.videoWidth,s.height=s.videoHeight,s.play();const a=document.createElement("canvas");a.width=s.videoWidth,a.height=s.videoHeight,a.getContext("2d").drawImage(s,0,0,a.width,a.height),p.getTracks().forEach(n=>n.stop()),a.toBlob(n=>{const l=document.createElement("a");l.href=URL.createObjectURL(n),l.download="screenshot.png",l.click(),URL.revokeObjectURL(l.href)})}catch(p){console.error("Error capturing screenshot:",p)}};return(p,s)=>(t(),c("button",{class:"text-white bg-blue-600 ps-1 pe-1",onClick:o},"WebRTC Capture Screenshot"))}}),E=D("",9),f=D("",5),b=D("",2),k=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"javascript/WebRTC.md","filePath":"javascript/WebRTC.md","lastUpdated":1731304615000}'),q={name:"javascript/WebRTC.md"},w=Object.assign(q,{setup(C){return(o,p)=>(t(),c("div",null,[E,A(m),f,A(g),b]))}});export{k as __pageData,w as default};
